{"name":"Angulargwt","tagline":"Angular integration for GWT","body":"# AngularGWT\r\nWrite AngularJS Controllers, Filters, Directives in GWT\r\n\r\n## What? (is it)\r\n\r\nThis is a library that enables Authors to write components or complete apps for [AngularJS][1] in Java. This is mostly done using compiler castings for [Google Web Toolkit][2] to \"compile\" Java Code into Javascript.\r\n\r\n## Why? (GWT to write Angular modules)\r\n\r\nAngularJS provides a MVVM framework for web apps, offering modularisation, IOC and allows to create reusable components while still allowing to create apps quickly. As every contemporary web app, AngularJS is built on Javascript.\r\n\r\nGWT offers a way to write, test and distibute code in Java and compile it to Javascript. This library offers the possiblity to use GWT to create modules and apps for AngularJS using GWT.\r\n\r\nJavascript is a very flexible and widespread language, however for mature languages like Java, a richer set of tooling regarding development, testing, versioning and distribution support is availiable. Also a large base of developers and libraries are availiable that can be migrated more easily.\r\n\r\n## How? (to use)\r\n\r\nBest way to start is to take a look at the archetypes.\r\n\r\n### Archetypes\r\n\r\nThere are two archetypes:\r\n* ```angulargwt-module-archetype``` for a **module** project, where the GWT code is used by a AngularJS app in javascript \r\n* ```angulargwt-app-archetype``` for an **app** project, where the top-level-module is written in GWT\r\n\r\nAs usual ``mvn archetype:generate`` or an IDE such as m2e or NetBeans can be used for the archetypes.\r\n\r\n### Other ways to set up AngularGWT projects\r\n\r\n#### Maven\r\nYou can build AngularGWT libraries or apps is using a maven plugin, such as the [codehaus gwt-maven-plugin][3] or the [gwt-maven-plugin from Thomas Broyer][4]\r\n\r\nIntegrate the following dependency into your pom.xml (adjust version number accordingly). It is on sonatype oss and releases are mirrored into maven central.\r\n\r\n```xml\r\n<dependency>\r\n   <groupId>com.github.h0ru5.gwt</groupId>\r\n   <artifactId>angulargwt</artifactId>\r\n   <version>1.1.3</version>\r\n</dependency>\r\n```\r\n\r\nCurrent SNAPSHOT state: [![Build Status](https://buildhive.cloudbees.com/job/h0ru5/job/angulargwt/badge/icon)](https://buildhive.cloudbees.com/job/h0ru5/job/angulargwt/)\r\n\r\n#### manually add the lib to your project\r\ntbd\r\n\r\n#### Ivy/Gradle/...\r\ntbd\r\n\r\n### Inheriting the GWT module\r\nThis inherits declaration is needed in your &lt;yourmodule&gt;.gwt.xml \r\n(note the com.google namespace)\r\n\r\n```xml\r\n<inherits name=\"com.google.gwt.angular.angulargwt\" />\r\n```\r\n\r\n### Creating an AngularJS module\r\nEvery project you write will provide at least one **AngularJS Module**. Just extend ``AngularModule`` and provide the module name and the dependencies with the ``@NgName`` and the ``@NgDepends`` annotations. Also put all provided components  (controllers, directives, services etc.) into the ``@NgDepends``.\r\n\r\nFor example:\r\n\r\n```java\r\n@NgName(\"mymodule\")\r\n@NgDepends({MyService.class, MyFilter.class, MyController.class, MyDirective.class})\r\npublic class MyModule implements AngularModule {\r\n}\r\n```\r\n\r\n### Choosing a module or an application as project type\r\n\r\nThere are three ways a project is used:\r\n\r\n1. As Java library in another AngularGWT project\r\n2. As javascript containing AngularGWT modules used by an AngularJS app\r\n3. As javascript containing AngularGWT modules incl. the top-module\r\n\r\nFor compillation to javascript, a GWT  entry point is needed. \r\n\r\n#### App project\r\n\r\nIf you write not only a library module but an **application** (use case 3), you need to provide a entry-point class by extending ``AngularApp``. You need to override the abstract method ``main()``, which should return all referenced AngularGWT modules as an array.\r\n\r\n```java\r\npublic class MyApp extends AngularApp {\r\n   @Override\r\n   protected AngularModule[] main() {\r\n     return new AngularModule[] {(AngularModule) GWT.create(MyModule.class)};\r\n   }\r\n}\r\n```\r\n\r\nThe template(s) are then provided in the same way as usual for AngularJS and need to include the GWT-generated script. You do not need to include angularjs in the head, it will be lazy-loaded from the CDN if it is not detected.\r\n\r\n#### A library of AngularGWT modules\r\n\r\nFor all other projects (use cases 1 or 2), you write a **module** and extend an entry-point in the same way from ``AngularEntryPoint``\r\n\r\n```java\r\npublic class MyLib extends AngularEntryPoint {\r\n   @Override\r\n   protected AngularModule[] main() {\r\n     return new AngularModule[] {(AngularModule) GWT.create(MyModule.class)};\r\n   }\r\n}\r\n```\r\n\r\nIf you use this lib in Java (use case 1), you just add the classes vand sources to the classpath (or let Maven do it).\r\n\r\nIf you use the compiled library as javascript in a regular AngularJS app (use case 2) then you have to delay the bootstrapping until the async loading of GWT has finished, this is done via a callback called ``angularGwtModuleLoaded``.\r\n\r\nThe script ``angulargwt.js`` provides a very basic handler for this purpose.\r\n\r\nSo your AngularJS-app **must not** use ``<body ng-app=\"MyApp\">``, but instead include this:\r\n\r\n```html\r\n<script type=\"text/javascript\" src=\"angulargwt.js\"></script>\r\n<script type=\"text/javascript\">\t\r\n\t\t// This must be called instead of ng-app!\r\n\t\tangulargwt('myApp');\r\n</script>\r\n```\r\n\r\nRefer to [bootstrap process documentation](http://docs.angularjs.org/guide/bootstrap) of AngularJS for background.\r\n\r\n### Implementing the different types of AngularJS components\r\n\r\nRefer to [AngularJS concepts][5] for a basic intro of the different types of components\r\n\r\n#### Model\r\nA model is defined by its interface, which must extend from ``Model<>`` and use the own type as type parameter for the superinterface.\r\n\r\nThe Model is generated during compilation and in code it is invoked via [deferred binding][6], which means you instatiate a Model via  ``GWT.create()``.\r\n\r\n```java\r\npublic interface Person extends Model<Person> {\r\n   String getName();\r\n   Person setName(String name);\r\n   \r\n   //or\r\n   \r\n   int age();\r\n   Person age(int age); \r\n}\r\n```\r\n\r\n#### Scope\r\nSimilar to the Model, a Scope is defined by contract (by its interface) and generated in the compilation process.\r\nNote that getters and setters can be implicit or explicit and use \"fluent\" or \"void-setter\" style.\r\n\r\n```java\r\npublic interface MyScope extends Scope<MyScope> {\r\n   void setPersons(ArrayOf<Person> persons);\r\n   ArrayOf<Person> getPersons();\r\n   \r\n   //or\r\n   \r\n   int maxPersons();\r\n   MyScope maxPersons(int max);\r\n}\r\n```\r\n\r\n#### Controller\r\n\r\nControllers extend the class ``Ã€ngularController<>`` and refer to their scope as type argument. The name to be used in the template is specified via ```@NgInject(name=\"ControllerName\")```.\r\n\r\nEach controller must implement the abstract function ``initialize(Scope scope)``, in which it initializes the scope.\r\n\r\nTo specify a component to be injected, it must be declared as a public field and annotated with ``@NgInjected``\r\n\r\nWatches are defined by annotating a Method with the ``@Watch`` annotation. The first parameter is the expression to be watched, the second parameter is a boolean that enforces deep object equality. The Method will be called when the watch expression changes with new and old value as parameters.\r\nRefer to [Angular's documentation on $watch][7] for background information.\r\n\r\n```java\r\n@NgInject(name = \"MyCtrl\")\r\npublic class MyController extends AngularController<MyScope> {\r\n    \r\n    @NgInjected\r\n    public MyService service;\r\n    \r\n    @Override\r\n    public void initialize(MyScope scope) {...}\r\n\r\n    @NgWatch(value = \"persons\", objEq = true)\r\n    public void $watchPersons() {...}\r\n    \r\n    @NgWatch(\"location.path()\")\r\n    public void $watchPath(String path) {...}\r\n    \r\n    //arbitrary functions to be called from the template\r\n    public void clearPersons() {...}\r\n}\r\n```\r\n\r\n#### Filter\r\nA Filter is implementing the Filter interface with a type parameter for the Model it is filtering. It is injectable by annotating the class with ```@NgInject(name=\"filterName\")```.\r\n\r\n```java\r\n@NgInject(name = \"todoFilter\")\r\npublic class TodoFilter implements Filter<Todo> {\r\n          \r\n        public ArrayOf<Todo> filter(ArrayOf<Todo> todos, Todo todoFilterArg) {\r\n            ArrayOf<Todo> result = JsArrayOf.create();\r\n            \r\n            //Filtering, e.g. by compairing with the Argument\r\n            \r\n            return result;\r\n        }\r\n}\r\n```\r\n\r\n#### Service\r\nA service can provide Util methods and is just implemented as POJO and annotated with the name used for injection into the controllers.\r\n\r\n```java\r\n@NgInject(name = \"serverProxy\")\r\npublic class ServerProxy {\r\n    public ArrayOf<Todo> get() {...}\r\n    public void put(ArrayOf<Todo> todos) {...}\r\n}\r\n```\r\n\r\n#### Directive\r\n\r\nDirectives are defined as classes that implement the interface ``Directive``. \r\nThe class must also be annotated as ``@NgDirective(\"name\")``.\r\n\r\nOther components can be injected similar to the controller.\r\n\r\n```java\r\n@NgDirective(\"displayPerson\")\r\npublic class MyDirective implements Directive {\r\n\r\n    @Override\r\n    public void init() {}\r\n\r\n    @Override\r\n    public void link(final MyScope scope, final ArrayOf<NgElement> element, final JsonObject attrs) {\r\n        //...\r\n    }\r\n}\r\n```\r\n\r\n## Supporting the project / to be done\r\n\r\n - More JavaDoc\r\n - Unit tests.\r\n - Transitive dependencies, modules that depend on modules.\r\n - JSO wrappers for the rest of the AngularJs API. (so far only what was needed for TodoMVC is implemented)\r\n\r\n## License\r\n\r\nSince GWT is using Apache Licence and AngularJS is using MIT Licence, the usage of this code code should conform this both licences.\r\nI am happy for any legal advice on the proper licencing.\r\n\r\n## Kudos\r\n\r\nI forked this code from [nordligulv][8], which is a fork from [cromwellian][9], I merely buffed things up a bit and added this doc.\r\n\r\n> Written with [StackEdit](https://stackedit.io/).\r\n\r\n\r\n  [1]: http://angularjs.org/ \"AngularJS\"\r\n  [2]: http://www.gwtproject.org/ \"GWT\"\r\n  [3]: http://mojo.codehaus.org/gwt-maven-plugin/\r\n  [4]: https://github.com/tbroyer/gwt-maven-plugin\r\n  [5]: http://docs.angularjs.org/guide/concepts\r\n  [6]: http://www.gwtproject.org/doc/latest/DevGuideCodingBasicsDeferred.html\r\n  [7]: http://docs.angularjs.org/api/ng.$rootScope.Scope#methods_$watch\r\n  [8]: https://github.com/nordligulv/angulargwt%20nordligulv\r\n  [9]: https://github.com/cromwellian/angulargwt%20cromweilian","google":"UA-48636598-1","note":"Don't delete this file! It's used internally to help with page regeneration."}